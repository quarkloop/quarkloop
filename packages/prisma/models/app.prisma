model App {
    id String @id

    name          String
    type          Int
    //visibility    Visibility
    //status        AppStatus
    workspacePath String    @unique
    profilePath   String    @unique
    createdAt     DateTime? @default(now())
    updatedAt     DateTime?
    icon          String?
    metadata      Json?

    instances      AppInstance[]
    threadSettings AppThreadSettings?
    filesSettings  AppFileSettings?
    pagesSettings  AppPageSettings[]
    formsSettings  AppFormSettings[]
}

model AppInstance {
    id String @id

    title     String
    stage     Int
    createdAt DateTime? @default(now())
    updatedAt DateTime?

    app   App    @relation(fields: [appId], references: [id], onUpdate: Cascade, onDelete: Cascade)
    appId String

    appThreadData AppThreadData[]
}

//@relations
model AppThreadSettings {
    id String @id

    app   App    @relation(fields: [appId], references: [id])
    appId String @unique
}

//@relations
model AppPageSettings {
    id String @id

    app   App    @relation(fields: [appId], references: [id])
    appId String
}

//@relations
model AppFormSettings {
    id String @id

    app   App    @relation(fields: [appId], references: [id])
    appId String
}

//@relations
model AppFileSettings {
    id String @id

    app   App    @relation(fields: [appId], references: [id])
    appId String @unique
}

//@relations
model AppThreadData {
    id Int @id @default(autoincrement())

    appInstance   AppInstance? @relation(fields: [appInstanceId], references: [id])
    appInstanceId String?
}
